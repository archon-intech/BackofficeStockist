import{_ as $}from"./AuthenticatedLayout-CrMmzawR.js";import{_ as I}from"./Breadcrumbs-eqMAb9UO.js";import{k as m,o as _,f as P,a as l,u as y,Z as x,w as e,b as t,j as v,d as o,t as u,c as h,F as C,m as V}from"./app-DFg3Xq1j.js";const L={class:"mb-5"},M=t("h5",{class:"text-h5 font-weight-bold"},"Deposit",-1),A={class:"d-flex flex-wrap align-center"},j={style:{display:"flex","flex-direction":"row",gap:"10px"}},R={style:{display:"flex","align-items":"center"}},E=t("span",{style:{"margin-left":"5px"}},"911,800,000",-1),N=t("div",{style:{display:"flex","align-items":"center"}},[t("span",{style:{"margin-left":"5px"}},"IDR"),t("span",{style:{"margin-left":"5px"}},"DEPOSIT")],-1),U={style:{display:"flex","align-items":"center"}},B=t("span",{style:{"margin-left":"5px"}},"14,833,000",-1),z=t("div",{style:{display:"flex","align-items":"center"}},[t("span",{style:{"margin-left":"5px"}},"IDR"),t("span",{style:{"margin-left":"5px"}},"DISCOUNT")],-1),O={style:{display:"flex","align-items":"center"}},F=t("span",{style:{"margin-left":"5px"}},"98,666,370",-1),H=t("div",{style:{display:"flex","align-items":"center"}},[t("span",{style:{"margin-left":"5px"}},"IDR"),t("span",{style:{"margin-left":"5px"}},"TAX")],-1),X={style:{display:"flex","align-items":"center"}},Y=t("span",{style:{"margin-left":"5px"}},"896,967,000",-1),G=t("div",{style:{display:"flex","align-items":"center"}},[t("span",{style:{"margin-left":"5px"}},"IDR"),t("span",{style:{"margin-left":"5px"}},"PAYMENT")],-1),K={style:{display:"flex","align-items":"center"}},Z=t("span",{style:{"margin-left":"5px"}},"0",-1),q=t("div",{style:{display:"flex","align-items":"center"}},[t("span",{style:{"margin-left":"5px"}},"IDR"),t("span",{style:{"margin-left":"5px"}},"RABAT")],-1),J={style:{"white-space":"nowrap"}},Q={name:"DepositIndex",props:{data:{type:Object}},data(){return{passwordDialog:!1,password:"",userId:null,headers:[{title:"Date",key:"created_at"},{title:"Owner",key:"member.name"},{title:"Status",key:"status"},{title:"Product",key:"product_total"},{title:"Starter Kit",key:"starter_kit_total"},{title:"Amount",key:"amount"},{title:"Discount",key:"discount"},{title:"Tax",key:"tax"},{title:"Payment",key:"total"},{title:"Rabat + Pajak",key:"rabat_pajak"},{title:"Rabat ",key:"rabat"},{title:"Action",key:"action",sortable:!1}],breadcrumbs:[{title:"Dashboard",disabled:!1,href:"/dashboard"},{title:"Deposit",disabled:!0}],isLoadingTable:!1,search:null,deleteDialog:!1,isLoading:!1,deleteId:null}},methods:{cancelPassword(){this.passwordDialog=!1,this.password=""},showPasswordDialog(i){this.userId=i,this.passwordDialog=!0},submitPassword(){this.isLoading=!0,this.$inertia.post(`/deposit/activate/${this.userId}`,{password:this.password},{onSuccess:()=>{this.isLoading=!1,this.passwordDialog=!1},onError:i=>{this.isLoading=!1,V().error("Password Anda Salah")}})},loadItems({page:i,itemsPerPage:s,sortBy:n,search:f}){this.isLoadingTable=!0;var p={page:i,limit:s,sort:n[0]};f&&(p.search=f),this.$inertia.get("/deposit",p,{preserveState:!0,preserveScroll:!0,onSuccess:()=>{this.isLoadingTable=!1}})},deleteItem(i){this.deleteId=i.id,this.deleteDialog=!0},submitDelete(){this.isLoading=!0,this.$inertia.delete(`/deposit/${this.deleteId}`,{preserveState:!0,preserveScroll:!0,onSuccess:()=>{this.isLoading=!1,this.deleteDialog=!1}})},formatDate(i){const s=new Date(i),n=s.getDate().toString().padStart(2,"0"),f=(s.getMonth()+1).toString().padStart(2,"0"),p=s.getFullYear(),d=s.getHours().toString().padStart(2,"0"),r=s.getMinutes().toString().padStart(2,"0");return`${n}-${f}-${p} ${d}:${r}`},formatDate2(i){const s=new Date(i),f=new Date-s,p=Math.floor(f/1e3),d=Math.floor(p/60),r=Math.floor(d/60),c=Math.floor(r/24),g=Math.floor(c/30);return g>0?`${g} months ago`:c>0?`${c} days ago`:r>0?`${r} hours ago`:d>0?`${d} minutes ago`:`${p} seconds ago`},addThousandSeparator(i){return i===null?"":i.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}}},ae=Object.assign(Q,{setup(i){return(s,n)=>{const f=m("v-text-field"),p=m("v-spacer"),d=m("v-btn"),r=m("v-icon"),c=m("v-card"),g=m("v-data-table-server"),w=m("v-card-text"),b=m("v-card-actions"),D=m("v-dialog"),k=m("v-row"),S=m("v-card-title");return _(),P(C,null,[l(y(x),{title:"Deposit"}),l($,null,{default:e(()=>[t("div",L,[M,l(I,{items:s.breadcrumbs,class:"pa-0 mt-1"},null,8,["items"])]),l(c,{class:"pa-4"},{default:e(()=>[t("div",A,[l(f,{modelValue:s.search,"onUpdate:modelValue":n[0]||(n[0]=a=>s.search=a),label:"Search",variant:"underlined","prepend-inner-icon":"mdi-magnify","hide-details":"",clearable:"","single-line":""},null,8,["modelValue"]),l(p),l(y(v),{href:"/deposit/create",as:"div"},{default:e(()=>[l(d,{color:"primary"},{default:e(()=>[o("Create")]),_:1})]),_:1})]),t("div",j,[l(c,{width:"200"},{title:e(()=>[t("div",R,[l(r,{color:"primary",size:"small",style:{"vertical-align":"middle"}},{default:e(()=>[o("mdi-bank")]),_:1}),E])]),subtitle:e(()=>[N]),_:1}),l(c,{width:"200"},{title:e(()=>[t("div",U,[l(r,{color:"warning",size:"small",style:{"vertical-align":"middle"}},{default:e(()=>[o("mdi-sale")]),_:1}),B])]),subtitle:e(()=>[z]),_:1}),l(c,{width:"200"},{title:e(()=>[t("div",O,[l(r,{color:"primary",size:"small",style:{"vertical-align":"middle"}},{default:e(()=>[o("mdi-percent")]),_:1}),F])]),subtitle:e(()=>[H]),_:1}),l(c,{width:"200"},{title:e(()=>[t("div",X,[l(r,{color:"primary",size:"small",style:{"vertical-align":"middle"}},{default:e(()=>[o("mdi-credit-card")]),_:1}),Y])]),subtitle:e(()=>[G]),_:1}),l(c,{width:"200"},{title:e(()=>[t("div",K,[l(r,{color:"primary",size:"small",style:{"vertical-align":"middle"}},{default:e(()=>[o("mdi-sale")]),_:1}),Z])]),subtitle:e(()=>[q]),_:1})]),l(g,{items:i.data.data,"items-length":i.data.total,headers:s.headers,search:s.search,class:"elevation-0",loading:s.isLoadingTable,"onUpdate:options":s.loadItems},{"item.member.name":e(({item:a})=>[t("div",null,u(a.member.name),1),t("div",null,u(a.member.user.name),1)]),"item.total":e(({item:a})=>[t("div",null,u(s.addThousandSeparator(a.total)),1)]),"item.product_total":e(({item:a})=>[t("div",null,u(s.addThousandSeparator(a.product_total)),1)]),"item.starter_kit_total":e(({item:a})=>[t("div",null,u(s.addThousandSeparator(a.starter_kit_total)),1)]),"item.amount":e(({item:a})=>[t("div",null,u(s.addThousandSeparator(a.amount)),1)]),"item.discount":e(({item:a})=>[t("div",null,u(s.addThousandSeparator(a.discount)),1)]),"item.tax":e(({item:a})=>[t("div",null,u(s.addThousandSeparator(a.tax)),1)]),"item.total":e(({item:a})=>[t("div",null,u(s.addThousandSeparator(a.total)),1)]),"item.rabat_pajak":e(({item:a})=>[t("div",null,u(s.addThousandSeparator(a.rabat_pajak)),1)]),"item.rabat":e(({item:a})=>[t("div",null,u(s.addThousandSeparator(a.rabat)),1)]),"item.created_at":e(({item:a})=>[t("div",J,[t("div",null,u(s.formatDate(a.created_at)),1),t("div",null,u(a.code),1)])]),"item.is_blocked":e(({item:a})=>[t("div",null,[a.is_blocked===0?(_(),h(d,{key:0,color:"success"},{default:e(()=>[o("Active")]),_:1})):(_(),h(d,{key:1,color:"error"},{default:e(()=>[o("Inactive")]),_:1}))])]),"item.status":e(({item:a})=>[t("div",null,[a.status=="D"?(_(),h(d,{key:0,onClick:T=>s.showPasswordDialog(a.id),color:"warning"},{default:e(()=>[o("PAID")]),_:2},1032,["onClick"])):a.status=="P"?(_(),h(d,{key:1,onClick:T=>s.showPasswordDialog(a.id),color:"info"},{default:e(()=>[o("PENDING")]),_:2},1032,["onClick"])):(_(),h(d,{key:2,color:"error"},{default:e(()=>[o("EXPIRED")]),_:1}))])]),"item.action":e(({item:a})=>[l(y(v),{href:`/deposit/${a.id}/edit`,as:"button",title:"View Detail"},{default:e(()=>[l(r,{color:"success",icon:"mdi-eye"})]),_:2},1032,["href"]),l(y(v),{href:`/deposit/${a.id}`,as:"button",title:"Download"},{default:e(()=>[l(r,{color:"info",icon:"mdi-download"})]),_:2},1032,["href"])]),_:2},1032,["items","items-length","headers","search","loading","onUpdate:options"])]),_:1}),l(k,{justify:"center"},{default:e(()=>[l(D,{modelValue:s.deleteDialog,"onUpdate:modelValue":n[2]||(n[2]=a=>s.deleteDialog=a),persistent:"",width:"auto"},{default:e(()=>[l(c,null,{default:e(()=>[l(w,null,{default:e(()=>[o("Are you sure you want to delete this item?")]),_:1}),l(b,null,{default:e(()=>[l(p),l(d,{color:"error",text:"",onClick:n[1]||(n[1]=a=>s.deleteDialog=!1)},{default:e(()=>[o("Cancel")]),_:1}),l(d,{color:"primary",loading:s.isLoading,text:"",onClick:s.submitDelete},{default:e(()=>[o("Delete")]),_:1},8,["loading","onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(k,{justify:"center"},{default:e(()=>[l(D,{modelValue:s.passwordDialog,"onUpdate:modelValue":n[4]||(n[4]=a=>s.passwordDialog=a),persistent:"",width:"400px"},{default:e(()=>[l(c,null,{default:e(()=>[l(S,null,{default:e(()=>[o("Enter Password")]),_:1}),l(w,null,{default:e(()=>[l(f,{modelValue:s.password,"onUpdate:modelValue":n[3]||(n[3]=a=>s.password=a),label:"Password",type:"password"},null,8,["modelValue"])]),_:1}),l(b,null,{default:e(()=>[l(d,{color:"error",text:"",onClick:s.cancelPassword},{default:e(()=>[o("Cancel")]),_:1},8,["onClick"]),l(p),l(d,{color:"primary",onClick:s.submitPassword},{default:e(()=>[o("Submit")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})],64)}}});export{ae as default};
