import{_ as S}from"./AuthenticatedLayout-CrMmzawR.js";import{_ as C}from"./Breadcrumbs-eqMAb9UO.js";import{k as d,o as h,f as M,a as t,u as y,Z as I,w as s,b as m,d as i,t as g,c as v,j as V,F as L,m as P}from"./app-DFg3Xq1j.js";const T={class:"mb-5"},U=m("h5",{class:"text-h5 font-weight-bold"},"Member",-1),A={class:"d-flex flex-wrap align-center"},j={style:{"white-space":"nowrap"}},F={style:{"white-space":"nowrap"}},N={name:"MemberIndex",props:{data:{type:Object}},data(){return{passwordDialog:!1,password:"",userId:null,headers:[{title:"Name",key:"name"},{title:"Username",key:"user.name"},{title:"Contact",key:"user.email"},{title:"Member ID",key:"user.id"},{title:"Status",key:"user.is_blocked"},{title:"Store",key:"store.id"},{title:"Register Date",key:"user.created_at"},{title:"Action",key:"action",sortable:!1}],breadcrumbs:[{title:"Dashboard",disabled:!1,href:"/dashboard"},{title:"Member",disabled:!0}],isLoadingTable:!1,search:null,deleteDialog:!1,isLoading:!1,deleteId:null}},methods:{cancelPassword(){this.passwordDialog=!1,this.password=""},createStore(o){console.log(o),this.id=o,this.$inertia.get(`/member/toko/${this.id}`)},showPasswordDialog(o){this.userId=o,this.passwordDialog=!0},showMemberDialog(o){this.userId=o,this.$inertia.get(`/member/${this.userId}`)},submitPassword(){this.isLoading=!0,this.$inertia.post(`/member/activate/${this.userId}`,{password:this.password},{onSuccess:()=>{this.isLoading=!1,this.passwordDialog=!1},onError:o=>{this.isLoading=!1,P().error("Password Anda Salah")}})},loadItems({page:o,itemsPerPage:e,sortBy:l,search:u}){this.isLoadingTable=!0;var n={page:o,limit:e,sort:l[0]};u&&(n.search=u),this.$inertia.get("/member",n,{preserveState:!0,preserveScroll:!0,onSuccess:()=>{this.isLoadingTable=!1}})},deleteItem(o){this.deleteId=o.id,this.deleteDialog=!0},submitDelete(){this.isLoading=!0,this.$inertia.delete(`/member/${this.deleteId}`,{preserveState:!0,preserveScroll:!0,onSuccess:()=>{this.isLoading=!1,this.deleteDialog=!1}})},formatDate(o){const e=new Date(o),l=e.getDate().toString().padStart(2,"0"),u=(e.getMonth()+1).toString().padStart(2,"0"),n=e.getFullYear(),r=e.getHours().toString().padStart(2,"0"),c=e.getMinutes().toString().padStart(2,"0");return`${l}-${u}-${n} ${r}:${c}`},formatDate2(o){const e=new Date(o),u=new Date-e,n=Math.floor(u/1e3),r=Math.floor(n/60),c=Math.floor(r/60),f=Math.floor(c/24),p=Math.floor(f/30);return p>0?`${p} months ago`:f>0?`${f} days ago`:c>0?`${c} hours ago`:r>0?`${r} minutes ago`:`${n} seconds ago`}}},H=Object.assign(N,{setup(o){return(e,l)=>{const u=d("v-text-field"),n=d("v-spacer"),r=d("v-btn"),c=d("v-icon"),f=d("v-data-table-server"),p=d("v-card"),$=d("v-card-title"),b=d("v-card-text"),w=d("v-card-actions"),k=d("v-dialog"),D=d("v-row");return h(),M(L,null,[t(y(I),{title:"Member"}),t(S,null,{default:s(()=>[m("div",T,[U,t(C,{items:e.breadcrumbs,class:"pa-0 mt-1"},null,8,["items"])]),t(p,{class:"pa-4"},{default:s(()=>[m("div",A,[t(u,{modelValue:e.search,"onUpdate:modelValue":l[0]||(l[0]=a=>e.search=a),label:"Search",variant:"underlined","prepend-inner-icon":"mdi-magnify","hide-details":"",clearable:"","single-line":""},null,8,["modelValue"]),t(n),t(r,{color:"primary"},{default:s(()=>[i("Filter")]),_:1})]),t(f,{items:o.data.data,"items-length":o.data.total,headers:e.headers,search:e.search,class:"elevation-0",loading:e.isLoadingTable,"onUpdate:options":e.loadItems},{"item.user.email":s(({item:a})=>[m("div",null,g(a.user.email),1),m("div",null,g(a.user.phone),1)]),"item.user.created_at":s(({item:a})=>[m("div",j,g(e.formatDate(a.user.created_at)),1),m("div",F,g(e.formatDate2(a.user.created_at)),1)]),"item.user.is_blocked":s(({item:a})=>[m("div",null,[a.user.is_blocked===0?(h(),v(r,{key:0,color:"success",onClick:_=>e.showPasswordDialog(a.user.id)},{default:s(()=>[i("Active")]),_:2},1032,["onClick"])):(h(),v(r,{key:1,color:"error",onClick:_=>e.showPasswordDialog(a.user.id)},{default:s(()=>[i("Inactive")]),_:2},1032,["onClick"]))])]),"item.store.id":s(({item:a})=>[m("div",null,[a.store?(h(),v(r,{key:0,color:"success"},{default:s(()=>[i("Available")]),_:1})):(h(),v(r,{key:1,color:"error",onClick:_=>e.createStore(a.id)},{default:s(()=>[i("Not Available")]),_:2},1032,["onClick"]))])]),"item.gender":s(({item:a})=>[i(g(a.gender=="male"?"Male":"Female"),1)]),"item.action":s(({item:a})=>[t(y(V),{href:`/member/${a.id}/edit`,as:"button"},{default:s(()=>[t(c,{color:"warning",icon:"mdi-pencil",size:"small"})]),_:2},1032,["href"]),t(c,{class:"ml-2",color:"info",icon:"mdi-eye",size:"small",onClick:_=>e.showMemberDialog(a.id)},null,8,["onClick"]),t(c,{class:"ml-2",color:"error",icon:"mdi-delete",size:"small",onClick:_=>e.deleteItem(a)},null,8,["onClick"])]),_:2},1032,["items","items-length","headers","search","loading","onUpdate:options"])]),_:1}),t(D,{justify:"center"},{default:s(()=>[t(k,{modelValue:e.passwordDialog,"onUpdate:modelValue":l[2]||(l[2]=a=>e.passwordDialog=a),persistent:"",width:"400px"},{default:s(()=>[t(p,null,{default:s(()=>[t($,null,{default:s(()=>[i("Enter Password")]),_:1}),t(b,null,{default:s(()=>[t(u,{modelValue:e.password,"onUpdate:modelValue":l[1]||(l[1]=a=>e.password=a),label:"Password",type:"password"},null,8,["modelValue"])]),_:1}),t(w,null,{default:s(()=>[t(r,{color:"error",text:"",onClick:e.cancelPassword},{default:s(()=>[i("Cancel")]),_:1},8,["onClick"]),t(n),t(r,{color:"primary",onClick:e.submitPassword},{default:s(()=>[i("Submit")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(D,{justify:"center"},{default:s(()=>[t(k,{modelValue:e.deleteDialog,"onUpdate:modelValue":l[4]||(l[4]=a=>e.deleteDialog=a),persistent:"",width:"auto"},{default:s(()=>[t(p,null,{default:s(()=>[t(b,null,{default:s(()=>[i("Are you sure you want to delete this item?")]),_:1}),t(w,null,{default:s(()=>[t(n),t(r,{color:"error",text:"",onClick:l[3]||(l[3]=a=>e.deleteDialog=!1)},{default:s(()=>[i("Cancel")]),_:1}),t(r,{color:"primary",loading:e.isLoading,text:"",onClick:e.submitDelete},{default:s(()=>[i("Delete")]),_:1},8,["loading","onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})],64)}}});export{H as default};
