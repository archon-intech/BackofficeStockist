import{_ as C}from"./AuthenticatedLayout-CrMmzawR.js";import{_ as P}from"./Breadcrumbs-eqMAb9UO.js";import{k as i,o as g,f as V,a as t,u as h,Z as I,w as a,b as p,j as y,d as u,t as _,c as S,F as L,m as T}from"./app-DFg3Xq1j.js";const M={class:"mb-5"},U=p("h5",{class:"text-h5 font-weight-bold"},"Product",-1),j={class:"d-flex flex-wrap align-center"},B={name:"ProductIndex",props:{data:{type:Object}},data(){return{passwordDialog:!1,password:"",userId:null,headers:[{title:"Name",key:"name"},{title:"Price",key:"price"},{title:"Type",key:"type"},{title:"Status",key:"is_enabled"},{title:"Action",key:"action",sortable:!1}],breadcrumbs:[{title:"Dashboard",disabled:!1,href:"/dashboard"},{title:"Product",disabled:!0}],isLoadingTable:!1,search:null,deleteDialog:!1,isLoading:!1,deleteId:null}},methods:{cancelPassword(){this.passwordDialog=!1,this.password=""},showPasswordDialog(o){this.userId=o,this.passwordDialog=!0},submitPassword(){this.isLoading=!0,this.$inertia.post(`/product/activate/${this.userId}`,{password:this.password},{onSuccess:()=>{this.isLoading=!1,this.passwordDialog=!1},onError:o=>{this.isLoading=!1,T().error("Password Anda Salah")}})},loadItems({page:o,itemsPerPage:e,sortBy:l,search:d}){this.isLoadingTable=!0;var n={page:o,limit:e,sort:l[0]};d&&(n.search=d),this.$inertia.get("/product",n,{preserveState:!0,preserveScroll:!0,onSuccess:()=>{this.isLoadingTable=!1}})},deleteItem(o){this.deleteId=o.id,this.deleteDialog=!0},submitDelete(){this.isLoading=!0,this.$inertia.delete(`/product/${this.deleteId}`,{preserveState:!0,preserveScroll:!0,onSuccess:()=>{this.isLoading=!1,this.deleteDialog=!1}})},formatDate(o){const e=new Date(o),l=e.getDate().toString().padStart(2,"0"),d=(e.getMonth()+1).toString().padStart(2,"0"),n=e.getFullYear(),r=e.getHours().toString().padStart(2,"0"),c=e.getMinutes().toString().padStart(2,"0");return`${l}-${d}-${n} ${r}:${c}`},formatDate2(o){const e=new Date(o),d=new Date-e,n=Math.floor(d/1e3),r=Math.floor(n/60),c=Math.floor(r/60),f=Math.floor(c/24),m=Math.floor(f/30);return m>0?`${m} months ago`:f>0?`${f} days ago`:c>0?`${c} hours ago`:r>0?`${r} minutes ago`:`${n} seconds ago`},addThousandSeparator(o){return o===null?"":o.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}}},F=Object.assign(B,{setup(o){return(e,l)=>{const d=i("v-text-field"),n=i("v-spacer"),r=i("v-btn"),c=i("v-icon"),f=i("v-data-table-server"),m=i("v-card"),v=i("v-card-text"),w=i("v-card-actions"),b=i("v-dialog"),D=i("v-row"),$=i("v-card-title");return g(),V(L,null,[t(h(I),{title:"Product"}),t(C,null,{default:a(()=>[p("div",M,[U,t(P,{items:e.breadcrumbs,class:"pa-0 mt-1"},null,8,["items"])]),t(m,{class:"pa-4"},{default:a(()=>[p("div",j,[t(d,{modelValue:e.search,"onUpdate:modelValue":l[0]||(l[0]=s=>e.search=s),label:"Search",variant:"underlined","prepend-inner-icon":"mdi-magnify","hide-details":"",clearable:"","single-line":""},null,8,["modelValue"]),t(n),t(h(y),{href:"/product/create",as:"div"},{default:a(()=>[t(r,{color:"primary"},{default:a(()=>[u("Create")]),_:1})]),_:1})]),t(f,{items:o.data.data,"items-length":o.data.total,headers:e.headers,search:e.search,class:"elevation-0",loading:e.isLoadingTable,"onUpdate:options":e.loadItems},{"item.name":a(({item:s})=>[p("div",null,_(s.name),1),p("div",null,_(s.sku),1)]),"item.price":a(({item:s})=>[p("div",null,_(e.addThousandSeparator(s.price)),1)]),"item.is_enabled":a(({item:s})=>[p("div",null,[s.is_enabled===1?(g(),S(r,{key:0,onClick:k=>e.showPasswordDialog(s.id),color:"success"},{default:a(()=>[u("Active")]),_:2},1032,["onClick"])):(g(),S(r,{key:1,onClick:k=>e.showPasswordDialog(s.id),color:"error"},{default:a(()=>[u("Inactive")]),_:2},1032,["onClick"]))])]),"item.action":a(({item:s})=>[t(h(y),{href:`/product/${s.id}/edit`,as:"button"},{default:a(()=>[t(c,{color:"warning",icon:"mdi-pencil",size:"small"})]),_:2},1032,["href"]),t(c,{class:"ml-2",color:"error",icon:"mdi-delete",size:"small",onClick:k=>e.deleteItem(s)},null,8,["onClick"])]),_:2},1032,["items","items-length","headers","search","loading","onUpdate:options"])]),_:1}),t(D,{justify:"center"},{default:a(()=>[t(b,{modelValue:e.deleteDialog,"onUpdate:modelValue":l[2]||(l[2]=s=>e.deleteDialog=s),persistent:"",width:"auto"},{default:a(()=>[t(m,null,{default:a(()=>[t(v,null,{default:a(()=>[u("Are you sure you want to delete this item?")]),_:1}),t(w,null,{default:a(()=>[t(n),t(r,{color:"error",text:"",onClick:l[1]||(l[1]=s=>e.deleteDialog=!1)},{default:a(()=>[u("Cancel")]),_:1}),t(r,{color:"primary",loading:e.isLoading,text:"",onClick:e.submitDelete},{default:a(()=>[u("Delete")]),_:1},8,["loading","onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(D,{justify:"center"},{default:a(()=>[t(b,{modelValue:e.passwordDialog,"onUpdate:modelValue":l[4]||(l[4]=s=>e.passwordDialog=s),persistent:"",width:"400px"},{default:a(()=>[t(m,null,{default:a(()=>[t($,null,{default:a(()=>[u("Enter Password")]),_:1}),t(v,null,{default:a(()=>[t(d,{modelValue:e.password,"onUpdate:modelValue":l[3]||(l[3]=s=>e.password=s),label:"Password",type:"password"},null,8,["modelValue"])]),_:1}),t(w,null,{default:a(()=>[t(r,{color:"error",text:"",onClick:e.cancelPassword},{default:a(()=>[u("Cancel")]),_:1},8,["onClick"]),t(n),t(r,{color:"primary",onClick:e.submitPassword},{default:a(()=>[u("Submit")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})],64)}}});export{F as default};
